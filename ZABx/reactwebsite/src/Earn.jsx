import React, { useState, useEffect } from "react";
import styled from 'styled-components';
import { Button } from './styles/Button';
import detectEthereumProvider from "@metamask/detect-provider";
import Web3 from 'web3';

const CONTRACT_ADDRESS = '0x2D5f1400eE1dcDfD4561E8D3201F2b0AF29026b3';

const ERC20_ABI = [
  {
    "_format": "hh-sol-artifact-1",
    "contractName": "ZABxToken",
    "sourceName": "contracts/ZABx.sol",
    "abi": [
      {
        "inputs": [],
        "stateMutability": "nonpayable",
        "type": "constructor"
      },
      {
        "anonymous": false,
        "inputs": [
          {
            "indexed": true,
            "internalType": "address",
            "name": "owner",
            "type": "address"
          },
          {
            "indexed": true,
            "internalType": "address",
            "name": "spender",
            "type": "address"
          },
          {
            "indexed": false,
            "internalType": "uint256",
            "name": "value",
            "type": "uint256"
          }
        ],
        "name": "Approval",
        "type": "event"
      },
      {
        "anonymous": false,
        "inputs": [
          {
            "indexed": true,
            "internalType": "address",
            "name": "previousOwner",
            "type": "address"
          },
          {
            "indexed": true,
            "internalType": "address",
            "name": "newOwner",
            "type": "address"
          }
        ],
        "name": "OwnershipTransferred",
        "type": "event"
      },
      {
        "anonymous": false,
        "inputs": [
          {
            "indexed": false,
            "internalType": "address",
            "name": "",
            "type": "address"
          },
          {
            "indexed": false,
            "internalType": "uint256",
            "name": "",
            "type": "uint256"
          }
        ],
        "name": "Received",
        "type": "event"
      },
      {
        "anonymous": false,
        "inputs": [
          {
            "indexed": true,
            "internalType": "address",
            "name": "from",
            "type": "address"
          },
          {
            "indexed": true,
            "internalType": "address",
            "name": "to",
            "type": "address"
          },
          {
            "indexed": false,
            "internalType": "uint256",
            "name": "value",
            "type": "uint256"
          }
        ],
        "name": "Transfer",
        "type": "event"
      },
      {
        "inputs": [
          {
            "internalType": "address",
            "name": "_user",
            "type": "address"
          }
        ],
        "name": "addtoBlackList",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
      },
      {
        "inputs": [
          {
            "internalType": "address",
            "name": "owner",
            "type": "address"
          },
          {
            "internalType": "address",
            "name": "spender",
            "type": "address"
          }
        ],
        "name": "allowance",
        "outputs": [
          {
            "internalType": "uint256",
            "name": "",
            "type": "uint256"
          }
        ],
        "stateMutability": "view",
        "type": "function"
      },
      {
        "inputs": [
          {
            "internalType": "address",
            "name": "spender",
            "type": "address"
          },
          {
            "internalType": "uint256",
            "name": "amount",
            "type": "uint256"
          }
        ],
        "name": "approve",
        "outputs": [
          {
            "internalType": "bool",
            "name": "",
            "type": "bool"
          }
        ],
        "stateMutability": "nonpayable",
        "type": "function"
      },
      {
        "inputs": [
          {
            "internalType": "address",
            "name": "owner",
            "type": "address"
          }
        ],
        "name": "balanceOf",
        "outputs": [
          {
            "internalType": "uint256",
            "name": "",
            "type": "uint256"
          }
        ],
        "stateMutability": "view",
        "type": "function"
      },
      {
        "inputs": [],
        "name": "decimals",
        "outputs": [
          {
            "internalType": "uint8",
            "name": "",
            "type": "uint8"
          }
        ],
        "stateMutability": "view",
        "type": "function"
      },
      {
        "inputs": [
          {
            "internalType": "address",
            "name": "spender",
            "type": "address"
          },
          {
            "internalType": "uint256",
            "name": "subtractedValue",
            "type": "uint256"
          }
        ],
        "name": "decreaseAllowance",
        "outputs": [
          {
            "internalType": "bool",
            "name": "",
            "type": "bool"
          }
        ],
        "stateMutability": "nonpayable",
        "type": "function"
      },
      {
        "inputs": [
          {
            "internalType": "address",
            "name": "spender",
            "type": "address"
          },
          {
            "internalType": "uint256",
            "name": "addedValue",
            "type": "uint256"
          }
        ],
        "name": "increaseAllowance",
        "outputs": [
          {
            "internalType": "bool",
            "name": "",
            "type": "bool"
          }
        ],
        "stateMutability": "nonpayable",
        "type": "function"
      },
      {
        "inputs": [],
        "name": "name",
        "outputs": [
          {
            "internalType": "string",
            "name": "",
            "type": "string"
          }
        ],
        "stateMutability": "view",
        "type": "function"
      },
      {
        "inputs": [
          {
            "internalType": "address",
            "name": "_user",
            "type": "address"
          }
        ],
        "name": "removeFromBlacklist",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
      },
      {
        "inputs": [],
        "name": "symbol",
        "outputs": [
          {
            "internalType": "string",
            "name": "",
            "type": "string"
          }
        ],
        "stateMutability": "view",
        "type": "function"
      },
      {
        "inputs": [],
        "name": "totalSupply",
        "outputs": [
          {
            "internalType": "uint256",
            "name": "",
            "type": "uint256"
          }
        ],
        "stateMutability": "view",
        "type": "function"
      },
      {
        "inputs": [
          {
            "internalType": "address",
            "name": "to",
            "type": "address"
          },
          {
            "internalType": "uint256",
            "name": "amount",
            "type": "uint256"
          }
        ],
        "name": "transfer",
        "outputs": [
          {
            "internalType": "bool",
            "name": "",
            "type": "bool"
          }
        ],
        "stateMutability": "nonpayable",
        "type": "function"
      },
      {
        "inputs": [
          {
            "internalType": "address",
            "name": "from",
            "type": "address"
          },
          {
            "internalType": "address",
            "name": "to",
            "type": "address"
          },
          {
            "internalType": "uint256",
            "name": "amount",
            "type": "uint256"
          }
        ],
        "name": "transferFrom",
        "outputs": [
          {
            "internalType": "bool",
            "name": "",
            "type": "bool"
          }
        ],
        "stateMutability": "nonpayable",
        "type": "function"
      },
      {
        "inputs": [
          {
            "internalType": "address",
            "name": "newOwner",
            "type": "address"
          }
        ],
        "name": "transferOwnership",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
      },
      {
        "inputs": [],
        "name": "withdrawEthers",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
      },
      {
        "stateMutability": "payable",
        "type": "receive"
      }
    ],
    "bytecode": "0x60806040523480156200001157600080fd5b506040518060400160405280600a81526020017f5a41425820544f4b454e000000000000000000000000000000000000000000008152506040518060400160405280600481526020017f5a4142780000000000000000000000000000000000000000000000000000000081525081600490816200008f91906200053d565b508060059081620000a191906200053d565b50620000b26200013b60201b60201c565b600660006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050506200013533620001096200014360201b60201c565b600a620001179190620007b4565b6402540be40062000129919062000805565b6200014c60201b60201c565b6200093c565b600033905090565b60006012905090565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603620001be576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620001b590620008b1565b60405180910390fd5b620001d260008383620002b960201b60201c565b8060036000828254620001e69190620008d3565b92505081905550806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508173ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040516200029991906200091f565b60405180910390a3620002b560008383620002be60201b60201c565b5050565b505050565b505050565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806200034557607f821691505b6020821081036200035b576200035a620002fd565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302620003c57fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8262000386565b620003d1868362000386565b95508019841693508086168417925050509392505050565b6000819050919050565b6000819050919050565b60006200041e620004186200041284620003e9565b620003f3565b620003e9565b9050919050565b6000819050919050565b6200043a83620003fd565b62000452620004498262000425565b84845462000393565b825550505050565b600090565b620004696200045a565b620004768184846200042f565b505050565b5b818110156200049e57620004926000826200045f565b6001810190506200047c565b5050565b601f821115620004ed57620004b78162000361565b620004c28462000376565b81016020851015620004d2578190505b620004ea620004e18562000376565b8301826200047b565b50505b505050565b600082821c905092915050565b60006200051260001984600802620004f2565b1980831691505092915050565b60006200052d8383620004ff565b9150826002028217905092915050565b6200054882620002c3565b67ffffffffffffffff811115620005645762000563620002ce565b5b6200057082546200032c565b6200057d828285620004a2565b600060209050601f831160018114620005b55760008415620005a0578287015190505b620005ac85826200051f565b8655506200061c565b601f198416620005c58662000361565b60005b82811015620005ef57848901518255600182019150602085019450602081019050620005c8565b868310156200060f57848901516200060b601f891682620004ff565b8355505b6001600288020188555050505b505050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60008160011c9050919050565b6000808291508390505b6001851115620006b2578086048111156200068a576200068962000624565b5b60018516156200069a5780820291505b8081029050620006aa8562000653565b94506200066a565b94509492505050565b600082620006cd5760019050620007a0565b81620006dd5760009050620007a0565b8160018114620006f65760028114620007015762000737565b6001915050620007a0565b60ff84111562000716576200071562000624565b5b8360020a91508482111562000730576200072f62000624565b5b50620007a0565b5060208310610133831016604e8410600b8410161715620007715782820a9050838111156200076b576200076a62000624565b5b620007a0565b62000780848484600162000660565b925090508184048111156200079a576200079962000624565b5b81810290505b9392505050565b600060ff82169050919050565b6000620007c182620003e9565b9150620007ce83620007a7565b9250620007fd7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8484620006bb565b905092915050565b60006200081282620003e9565b91506200081f83620003e9565b92508282026200082f81620003e9565b9150828204841483151762000849576200084862000624565b5b5092915050565b600082825260208201905092915050565b7f45524332303a206d696e7420746f20746865207a65726f206164647265737300600082015250565b600062000899601f8362000850565b9150620008a68262000861565b602082019050919050565b60006020820190508181036000830152620008cc816200088a565b9050919050565b6000620008e082620003e9565b9150620008ed83620003e9565b925082820190508082111562000908576200090762000624565b5b92915050565b6200091981620003e9565b82525050565b60006020820190506200093660008301846200090e565b92915050565b611bff806200094c6000396000f3fe6080604052600436106100ec5760003560e01c8063687e6f441161008a578063a9059cbb11610059578063a9059cbb1461034e578063dd62ed3e1461038b578063e1b0ce52146103c8578063f2fde38b146103f15761012c565b8063687e6f441461029257806370a08231146102a957806395d89b41146102e6578063a457c2d7146103115761012c565b806323b872dd116100c657806323b872dd146101c4578063313ce56714610201578063395093511461022c578063537df3b6146102695761012c565b806306fdde0314610131578063095ea7b31461015c57806318160ddd146101995761012c565b3661012c577f88a5966d370b9919b20f3e2c13ff65706f196a4e32cc2c12bf57088f885258743334604051610122929190611252565b60405180910390a1005b600080fd5b34801561013d57600080fd5b5061014661041a565b604051610153919061130b565b60405180910390f35b34801561016857600080fd5b50610183600480360381019061017e919061138a565b6104ac565b60405161019091906113e5565b60405180910390f35b3480156101a557600080fd5b506101ae6104cf565b6040516101bb9190611400565b60405180910390f35b3480156101d057600080fd5b506101eb60048036038101906101e6919061141b565b6104d9565b6040516101f891906113e5565b60405180910390f35b34801561020d57600080fd5b50610216610508565b604051610223919061148a565b60405180910390f35b34801561023857600080fd5b50610253600480360381019061024e919061138a565b610511565b60405161026091906113e5565b60405180910390f35b34801561027557600080fd5b50610290600480360381019061028b91906114a5565b610548565b005b34801561029e57600080fd5b506102a76106c6565b005b3480156102b557600080fd5b506102d060048036038101906102cb91906114a5565b6107db565b6040516102dd9190611400565b60405180910390f35b3480156102f257600080fd5b506102fb610823565b604051610308919061130b565b60405180910390f35b34801561031d57600080fd5b506103386004803603810190610333919061138a565b6108b5565b60405161034591906113e5565b60405180910390f35b34801561035a57600080fd5b506103756004803603810190610370919061138a565b61092c565b60405161038291906113e5565b60405180910390f35b34801561039757600080fd5b506103b260048036038101906103ad91906114d2565b61094f565b6040516103bf9190611400565b60405180910390f35b3480156103d457600080fd5b506103ef60048036038101906103ea91906114a5565b6109d6565b005b3480156103fd57600080fd5b50610418600480360381019061041391906114a5565b610b55565b005b60606004805461042990611541565b80601f016020809104026020016040519081016040528092919081815260200182805461045590611541565b80156104a25780601f10610477576101008083540402835291602001916104a2565b820191906000526020600020905b81548152906001019060200180831161048557829003601f168201915b5050505050905090565b6000806104b7610d1b565b90506104c4818585610d23565b600191505092915050565b6000600354905090565b6000806104e4610d1b565b90506104f1858285610eec565b6104fc858585610f78565b60019150509392505050565b60006012905090565b60008061051c610d1b565b905061053d81858561052e858961094f565b61053891906115a1565b610d23565b600191505092915050565b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16610589610d1b565b73ffffffffffffffffffffffffffffffffffffffff16146105df576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105d690611621565b60405180910390fd5b600260008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1661066b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106629061168d565b60405180910390fd5b6000600260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555050565b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16610707610d1b565b73ffffffffffffffffffffffffffffffffffffffff161461075d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161075490611621565b60405180910390fd5b6000600754116107a2576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610799906116f9565b60405180910390fd5b6107d130600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600754610f78565b6000600781905550565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b60606005805461083290611541565b80601f016020809104026020016040519081016040528092919081815260200182805461085e90611541565b80156108ab5780601f10610880576101008083540402835291602001916108ab565b820191906000526020600020905b81548152906001019060200180831161088e57829003601f168201915b5050505050905090565b6000806108c0610d1b565b905060006108ce828661094f565b905083811015610913576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161090a9061178b565b60405180910390fd5b6109208286868403610d23565b60019250505092915050565b600080610937610d1b565b9050610944818585610f78565b600191505092915050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16610a17610d1b565b73ffffffffffffffffffffffffffffffffffffffff1614610a6d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a6490611621565b60405180910390fd5b600260008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1615610afa576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610af1906117f7565b60405180910390fd5b6001600260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555050565b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16610b96610d1b565b73ffffffffffffffffffffffffffffffffffffffff1614610bec576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610be390611621565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1603610c5b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c5290611863565b60405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff16600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a380600660006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b600033905090565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610d92576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d89906118f5565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610e01576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610df890611987565b60405180910390fd5b80600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92583604051610edf9190611400565b60405180910390a3505050565b6000610ef8848461094f565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8114610f725781811015610f64576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f5b906119f3565b60405180910390fd5b610f718484848403610d23565b5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610fe7576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610fde90611a85565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603611056576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161104d90611b17565b60405180910390fd5b6110618383836111ee565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050818110156110e7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110de90611ba9565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040516111d59190611400565b60405180910390a36111e88484846111f3565b50505050565b505050565b505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611223826111f8565b9050919050565b61123381611218565b82525050565b6000819050919050565b61124c81611239565b82525050565b6000604082019050611267600083018561122a565b6112746020830184611243565b9392505050565b600081519050919050565b600082825260208201905092915050565b60005b838110156112b557808201518184015260208101905061129a565b60008484015250505050565b6000601f19601f8301169050919050565b60006112dd8261127b565b6112e78185611286565b93506112f7818560208601611297565b611300816112c1565b840191505092915050565b6000602082019050818103600083015261132581846112d2565b905092915050565b600080fd5b61133b81611218565b811461134657600080fd5b50565b60008135905061135881611332565b92915050565b61136781611239565b811461137257600080fd5b50565b6000813590506113848161135e565b92915050565b600080604083850312156113a1576113a061132d565b5b60006113af85828601611349565b92505060206113c085828601611375565b9150509250929050565b60008115159050919050565b6113df816113ca565b82525050565b60006020820190506113fa60008301846113d6565b92915050565b60006020820190506114156000830184611243565b92915050565b6000806000606084860312156114345761143361132d565b5b600061144286828701611349565b935050602061145386828701611349565b925050604061146486828701611375565b9150509250925092565b600060ff82169050919050565b6114848161146e565b82525050565b600060208201905061149f600083018461147b565b92915050565b6000602082840312156114bb576114ba61132d565b5b60006114c984828501611349565b91505092915050565b600080604083850312156114e9576114e861132d565b5b60006114f785828601611349565b925050602061150885828601611349565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061155957607f821691505b60208210810361156c5761156b611512565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60006115ac82611239565b91506115b783611239565b92508282019050808211156115cf576115ce611572565b5b92915050565b7f43616c6c6572206973206e6f7420746865206f776e6572000000000000000000600082015250565b600061160b601783611286565b9150611616826115d5565b602082019050919050565b6000602082019050818103600083015261163a816115fe565b9050919050565b7f5573657220697320616c72656164792077686974656c69737465640000000000600082015250565b6000611677601b83611286565b915061168282611641565b602082019050919050565b600060208201905081810360008301526116a68161166a565b9050919050565b7f546865726520617265206e6f2065746865727320746f2077697468647261772e600082015250565b60006116e3602083611286565b91506116ee826116ad565b602082019050919050565b60006020820190508181036000830152611712816116d6565b9050919050565b7f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f7760008201527f207a65726f000000000000000000000000000000000000000000000000000000602082015250565b6000611775602583611286565b915061178082611719565b604082019050919050565b600060208201905081810360008301526117a481611768565b9050919050565b7f5573657220697320616c726561647920626c61636b6c69737465640000000000600082015250565b60006117e1601b83611286565b91506117ec826117ab565b602082019050919050565b60006020820190508181036000830152611810816117d4565b9050919050565b7f4e6577206f776e657220697320746865207a65726f2061646472657373000000600082015250565b600061184d601d83611286565b915061185882611817565b602082019050919050565b6000602082019050818103600083015261187c81611840565b9050919050565b7f45524332303a20617070726f76652066726f6d20746865207a65726f2061646460008201527f7265737300000000000000000000000000000000000000000000000000000000602082015250565b60006118df602483611286565b91506118ea82611883565b604082019050919050565b6000602082019050818103600083015261190e816118d2565b9050919050565b7f45524332303a20617070726f766520746f20746865207a65726f20616464726560008201527f7373000000000000000000000000000000000000000000000000000000000000602082015250565b6000611971602283611286565b915061197c82611915565b604082019050919050565b600060208201905081810360008301526119a081611964565b9050919050565b7f45524332303a20696e73756666696369656e7420616c6c6f77616e6365000000600082015250565b60006119dd601d83611286565b91506119e8826119a7565b602082019050919050565b60006020820190508181036000830152611a0c816119d0565b9050919050565b7f45524332303a207472616e736665722066726f6d20746865207a65726f20616460008201527f6472657373000000000000000000000000000000000000000000000000000000602082015250565b6000611a6f602583611286565b9150611a7a82611a13565b604082019050919050565b60006020820190508181036000830152611a9e81611a62565b9050919050565b7f45524332303a207472616e7366657220746f20746865207a65726f206164647260008201527f6573730000000000000000000000000000000000000000000000000000000000602082015250565b6000611b01602383611286565b9150611b0c82611aa5565b604082019050919050565b60006020820190508181036000830152611b3081611af4565b9050919050565b7f45524332303a207472616e7366657220616d6f756e742065786365656473206260008201527f616c616e63650000000000000000000000000000000000000000000000000000602082015250565b6000611b93602683611286565b9150611b9e82611b37565b604082019050919050565b60006020820190508181036000830152611bc281611b86565b905091905056fea26469706673582212202364d44a8fdece76a63edb42ed12bfd452c7f72364d885a52e76fb33d19e1b6f64736f6c63430008110033",
    "deployedBytecode": "0x6080604052600436106100ec5760003560e01c8063687e6f441161008a578063a9059cbb11610059578063a9059cbb1461034e578063dd62ed3e1461038b578063e1b0ce52146103c8578063f2fde38b146103f15761012c565b8063687e6f441461029257806370a08231146102a957806395d89b41146102e6578063a457c2d7146103115761012c565b806323b872dd116100c657806323b872dd146101c4578063313ce56714610201578063395093511461022c578063537df3b6146102695761012c565b806306fdde0314610131578063095ea7b31461015c57806318160ddd146101995761012c565b3661012c577f88a5966d370b9919b20f3e2c13ff65706f196a4e32cc2c12bf57088f885258743334604051610122929190611252565b60405180910390a1005b600080fd5b34801561013d57600080fd5b5061014661041a565b604051610153919061130b565b60405180910390f35b34801561016857600080fd5b50610183600480360381019061017e919061138a565b6104ac565b60405161019091906113e5565b60405180910390f35b3480156101a557600080fd5b506101ae6104cf565b6040516101bb9190611400565b60405180910390f35b3480156101d057600080fd5b506101eb60048036038101906101e6919061141b565b6104d9565b6040516101f891906113e5565b60405180910390f35b34801561020d57600080fd5b50610216610508565b604051610223919061148a565b60405180910390f35b34801561023857600080fd5b50610253600480360381019061024e919061138a565b610511565b60405161026091906113e5565b60405180910390f35b34801561027557600080fd5b50610290600480360381019061028b91906114a5565b610548565b005b34801561029e57600080fd5b506102a76106c6565b005b3480156102b557600080fd5b506102d060048036038101906102cb91906114a5565b6107db565b6040516102dd9190611400565b60405180910390f35b3480156102f257600080fd5b506102fb610823565b604051610308919061130b565b60405180910390f35b34801561031d57600080fd5b506103386004803603810190610333919061138a565b6108b5565b60405161034591906113e5565b60405180910390f35b34801561035a57600080fd5b506103756004803603810190610370919061138a565b61092c565b60405161038291906113e5565b60405180910390f35b34801561039757600080fd5b506103b260048036038101906103ad91906114d2565b61094f565b6040516103bf9190611400565b60405180910390f35b3480156103d457600080fd5b506103ef60048036038101906103ea91906114a5565b6109d6565b005b3480156103fd57600080fd5b50610418600480360381019061041391906114a5565b610b55565b005b60606004805461042990611541565b80601f016020809104026020016040519081016040528092919081815260200182805461045590611541565b80156104a25780601f10610477576101008083540402835291602001916104a2565b820191906000526020600020905b81548152906001019060200180831161048557829003601f168201915b5050505050905090565b6000806104b7610d1b565b90506104c4818585610d23565b600191505092915050565b6000600354905090565b6000806104e4610d1b565b90506104f1858285610eec565b6104fc858585610f78565b60019150509392505050565b60006012905090565b60008061051c610d1b565b905061053d81858561052e858961094f565b61053891906115a1565b610d23565b600191505092915050565b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16610589610d1b565b73ffffffffffffffffffffffffffffffffffffffff16146105df576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105d690611621565b60405180910390fd5b600260008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1661066b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106629061168d565b60405180910390fd5b6000600260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555050565b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16610707610d1b565b73ffffffffffffffffffffffffffffffffffffffff161461075d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161075490611621565b60405180910390fd5b6000600754116107a2576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610799906116f9565b60405180910390fd5b6107d130600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600754610f78565b6000600781905550565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b60606005805461083290611541565b80601f016020809104026020016040519081016040528092919081815260200182805461085e90611541565b80156108ab5780601f10610880576101008083540402835291602001916108ab565b820191906000526020600020905b81548152906001019060200180831161088e57829003601f168201915b5050505050905090565b6000806108c0610d1b565b905060006108ce828661094f565b905083811015610913576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161090a9061178b565b60405180910390fd5b6109208286868403610d23565b60019250505092915050565b600080610937610d1b565b9050610944818585610f78565b600191505092915050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16610a17610d1b565b73ffffffffffffffffffffffffffffffffffffffff1614610a6d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a6490611621565b60405180910390fd5b600260008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1615610afa576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610af1906117f7565b60405180910390fd5b6001600260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555050565b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16610b96610d1b565b73ffffffffffffffffffffffffffffffffffffffff1614610bec576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610be390611621565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1603610c5b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c5290611863565b60405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff16600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a380600660006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b600033905090565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610d92576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d89906118f5565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610e01576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610df890611987565b60405180910390fd5b80600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92583604051610edf9190611400565b60405180910390a3505050565b6000610ef8848461094f565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8114610f725781811015610f64576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f5b906119f3565b60405180910390fd5b610f718484848403610d23565b5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610fe7576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610fde90611a85565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603611056576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161104d90611b17565b60405180910390fd5b6110618383836111ee565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050818110156110e7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110de90611ba9565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040516111d59190611400565b60405180910390a36111e88484846111f3565b50505050565b505050565b505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611223826111f8565b9050919050565b61123381611218565b82525050565b6000819050919050565b61124c81611239565b82525050565b6000604082019050611267600083018561122a565b6112746020830184611243565b9392505050565b600081519050919050565b600082825260208201905092915050565b60005b838110156112b557808201518184015260208101905061129a565b60008484015250505050565b6000601f19601f8301169050919050565b60006112dd8261127b565b6112e78185611286565b93506112f7818560208601611297565b611300816112c1565b840191505092915050565b6000602082019050818103600083015261132581846112d2565b905092915050565b600080fd5b61133b81611218565b811461134657600080fd5b50565b60008135905061135881611332565b92915050565b61136781611239565b811461137257600080fd5b50565b6000813590506113848161135e565b92915050565b600080604083850312156113a1576113a061132d565b5b60006113af85828601611349565b92505060206113c085828601611375565b9150509250929050565b60008115159050919050565b6113df816113ca565b82525050565b60006020820190506113fa60008301846113d6565b92915050565b60006020820190506114156000830184611243565b92915050565b6000806000606084860312156114345761143361132d565b5b600061144286828701611349565b935050602061145386828701611349565b925050604061146486828701611375565b9150509250925092565b600060ff82169050919050565b6114848161146e565b82525050565b600060208201905061149f600083018461147b565b92915050565b6000602082840312156114bb576114ba61132d565b5b60006114c984828501611349565b91505092915050565b600080604083850312156114e9576114e861132d565b5b60006114f785828601611349565b925050602061150885828601611349565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061155957607f821691505b60208210810361156c5761156b611512565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60006115ac82611239565b91506115b783611239565b92508282019050808211156115cf576115ce611572565b5b92915050565b7f43616c6c6572206973206e6f7420746865206f776e6572000000000000000000600082015250565b600061160b601783611286565b9150611616826115d5565b602082019050919050565b6000602082019050818103600083015261163a816115fe565b9050919050565b7f5573657220697320616c72656164792077686974656c69737465640000000000600082015250565b6000611677601b83611286565b915061168282611641565b602082019050919050565b600060208201905081810360008301526116a68161166a565b9050919050565b7f546865726520617265206e6f2065746865727320746f2077697468647261772e600082015250565b60006116e3602083611286565b91506116ee826116ad565b602082019050919050565b60006020820190508181036000830152611712816116d6565b9050919050565b7f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f7760008201527f207a65726f000000000000000000000000000000000000000000000000000000602082015250565b6000611775602583611286565b915061178082611719565b604082019050919050565b600060208201905081810360008301526117a481611768565b9050919050565b7f5573657220697320616c726561647920626c61636b6c69737465640000000000600082015250565b60006117e1601b83611286565b91506117ec826117ab565b602082019050919050565b60006020820190508181036000830152611810816117d4565b9050919050565b7f4e6577206f776e657220697320746865207a65726f2061646472657373000000600082015250565b600061184d601d83611286565b915061185882611817565b602082019050919050565b6000602082019050818103600083015261187c81611840565b9050919050565b7f45524332303a20617070726f76652066726f6d20746865207a65726f2061646460008201527f7265737300000000000000000000000000000000000000000000000000000000602082015250565b60006118df602483611286565b91506118ea82611883565b604082019050919050565b6000602082019050818103600083015261190e816118d2565b9050919050565b7f45524332303a20617070726f766520746f20746865207a65726f20616464726560008201527f7373000000000000000000000000000000000000000000000000000000000000602082015250565b6000611971602283611286565b915061197c82611915565b604082019050919050565b600060208201905081810360008301526119a081611964565b9050919050565b7f45524332303a20696e73756666696369656e7420616c6c6f77616e6365000000600082015250565b60006119dd601d83611286565b91506119e8826119a7565b602082019050919050565b60006020820190508181036000830152611a0c816119d0565b9050919050565b7f45524332303a207472616e736665722066726f6d20746865207a65726f20616460008201527f6472657373000000000000000000000000000000000000000000000000000000602082015250565b6000611a6f602583611286565b9150611a7a82611a13565b604082019050919050565b60006020820190508181036000830152611a9e81611a62565b9050919050565b7f45524332303a207472616e7366657220746f20746865207a65726f206164647260008201527f6573730000000000000000000000000000000000000000000000000000000000602082015250565b6000611b01602383611286565b9150611b0c82611aa5565b604082019050919050565b60006020820190508181036000830152611b3081611af4565b9050919050565b7f45524332303a207472616e7366657220616d6f756e742065786365656473206260008201527f616c616e63650000000000000000000000000000000000000000000000000000602082015250565b6000611b93602683611286565b9150611b9e82611b37565b604082019050919050565b60006020820190508181036000830152611bc281611b86565b905091905056fea26469706673582212202364d44a8fdece76a63edb42ed12bfd452c7f72364d885a52e76fb33d19e1b6f64736f6c63430008110033",
    "linkReferences": {},
    "deployedLinkReferences": {}
  }
  ]

const Earn = () => {
  const [account, setAccount] = useState(null);
  const [email, setEmail] = useState('');
  const [phoneNumber, setPhoneNumber] = useState('');
  const [twitter, setTwitter] = useState('');
  const [telegram, setTelegram] = useState('');
  const [name, setName] = useState('');

  const handleClaimReward = async () => {
    if (!email || !validateEmail(email)) {
      alert('Please enter a valid email address.');
      return;
    }

    if (!twitter || !validateTwitterURL(twitter)) {
      alert('Please enter a valid Twitter URL.');
      return;
    }

    if (!phoneNumber || !validatePhoneNumber(phoneNumber)) {
      alert('Please enter a valid phone number.');
      return;
    }

    console.log('Name:', name);
    console.log('Email:', email);
    console.log('Phone Number:', phoneNumber);
    console.log('Twitter URL:', twitter);
    console.log('Telegram Username:', telegram);

    const ethereumProvider = await detectEthereumProvider();
    if (ethereumProvider) {
      const web3 = new Web3(ethereumProvider);
      const contract = new web3.eth.Contract(ERC20_ABI, CONTRACT_ADDRESS);
      
      const amount = web3.utils.toWei('2000', 'ether');
      
      contract.methods.transfer(account, amount).send({from: account}, function(error, hash) {
        if(error) {
          console.log('Transfer error:', error);
        } else {
          console.log('Transaction hash:', hash);
        }
      });

    } else {
      console.log('Please install MetaMask.');
    }

    clearFormFields();
  };

  const validateEmail = (email) => {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
  };

  const validateTwitterURL = (url) => {
    const twitterRegex = /^(?:https?:\/\/)?(?:www\.)?twitter\.com\/(?:#!\/)?[a-zA-Z0-9_]+(?:\/\w+)*$/;
    return twitterRegex.test(url);
  };

  const validatePhoneNumber = (phoneNumber) => {
    const phoneNumberRegex = /^\d{10}$/;
    return phoneNumberRegex.test(phoneNumber);
  };

  const clearFormFields = () => {
    setName('');
    setEmail('');
    setPhoneNumber('');
    setTwitter('');
    setTelegram('');
  };

  useEffect(() => {
    const detectProvider = async () => {
      try {
        const ethereumProvider = await detectEthereumProvider();
        if (ethereumProvider && ethereumProvider.selectedAddress) {
          setAccount(ethereumProvider.selectedAddress);
        } else {
          setAccount(null);
        }
      } catch (error) {
        console.error("Error detecting Ethereum provider: ", error);
      }
    };

    detectProvider();
  }, []);

  return (
    <Container>
      <FormWrapper>
        <Form>
          <h5>To Earn Free Coins</h5>
          <FormGroup>
            <label htmlFor="name">Name</label>
            <input
              type="text"
              id="name"
              name="name"
              placeholder="Enter your full name"
              value={name}
              onChange={(e) => setName(e.target.value)}
            />
          </FormGroup>
          <FormGroup>
            <label htmlFor="email">Email</label>
            <input
              type="email"
              id="email"
              name="email"
              placeholder="Enter your email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
            />
          </FormGroup>
          <FormGroup>
            <label htmlFor="phoneNumber">Phone Number</label>
            <input
              type="tel"
              id="phoneNumber"
              name="phoneNumber"
              placeholder="Enter your phone number"
              value={phoneNumber}
              onChange={(e) => setPhoneNumber(e.target.value)}
            />
          </FormGroup>
          <FormGroup>
            <label htmlFor="twitter">Twitter URL</label>
            <input
              type="url"
              id="twitter"
              name="twitter"
              placeholder="Enter your Twitter URL"
              value={twitter}
              onChange={(e) => setTwitter(e.target.value)}
            />
          </FormGroup>
          <FormGroup>
            <label htmlFor="telegram">Telegram Username</label>
            <input
              type="text"
              id="telegram"
              name="telegram"
              placeholder="Enter your Telegram username"
              value={telegram}
              onChange={(e) => setTelegram(e.target.value)}
            />
          </FormGroup>
          <AccountInfo>
            {account ? (
              <p>Connected Account: {account}</p>
            ) : (
              <p>Not Connected</p>
            )}
          </AccountInfo>
          <ButtonWrapper>
            <StyledButton onClick={handleClaimReward}>Claim your reward</StyledButton>
          </ButtonWrapper>
        </Form>
      </FormWrapper>
    </Container>
  );
};
const Container = styled.div`
  display: flex;
  background: #192a56;
  height: 750px;
`;

const FormWrapper = styled.div`
  width: 600px;
  height: 500px;
  margin: 1cm auto;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  border-radius: 20px;
`;

const Form = styled.form`
  background: #f9f9f9;
  padding: 40px;
  border-radius: 5px;
  flex-grow: 1;
  display: flex;
  flex-direction: column;

  h5 {
    font-size: 2.5rem;
    font-weight: 700;
    text-align: center;
    margin-bottom: 30px;
  }
`;

const FormGroup = styled.div`
  margin-bottom: 20px;

  label {
    display: block;
    margin-bottom: 5px;
    font-size: 1.5rem;
    font-weight: 600;
  }

  input {
    width: 100%;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 3px;
  }
`;

const AccountInfo = styled.div`
  margin-bottom: 20px;
  text-align: center;

  p {
    font-size: 1.2rem;
  }
`;

const ButtonWrapper = styled.div`
  display: flex;
  justify-content: center;
  margin-top: 30px;
`;

const StyledButton = styled(Button)`
  border-radius: 20px;
`;

export default Earn;